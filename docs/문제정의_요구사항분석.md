# 문제 정의 및 요구사항 분석 문서
작성자 : 홍석호

작성일 : 2024.04.04

## 목차
1. [문제 정의](#1-문제-정의)
2. [요구사항 분석](#2-요구사항-분석)

## 1. 문제 정의
<b>오프라인을 통한 상품 구매의 문제는 위치와 시간에 상당한 제약</b>이 존재합니다.

판매자는 고정된 장소에서만 판매를 할 수 있으며, 구매자는 판매자가 정해놓은 시간에만 구매를 할 수 있습니다.

인터넷을 통해 모든 것을 할 수 있는 시대에 오프라인으로만 판매를 하는 것은 

그렇기에, 온라인으로 상품을 구매할 수 있는 시스템이 필요합니다.
즉, <b>누구나 언제 어디서든지 인터넷으로 상품과 재고를 확인하고 구매할 수 있는 시스템</b>이 필요합니다.

## 2. 요구사항 분석
### 2.1 기능 요구사항
#### 잔액 충전

**정상 상황**

| 입력      | 출력              | 설명                             | 제약사항 |
|---------|-----------------|--------------------------------|------|
| 사용자 식별자 | 현재 사용자의가 소유한 금액 | 사용자가 상품 구매에 사용할 수 있는 금액을 충전한다. |      |

**예외 상황**

- 충전할 수 있는 잔액은 항상 양수여야 합니다.
- 최소 잔액은 0, 최대 잔액은 1,000,00이고 이를 초과하여 충전할 수 없습니다.
- 주문과 충전을 동시에 진행하더라도 문제가 없어야 합니다.

#### 잔액 조회

**정상 상황**

| 입력      | 출력             | 설명                         | 제약사항 |
|---------|----------------|----------------------------|------|
| 사용자 식별자 | 현재 사용자가 소유한 금액 | 사용자가 현재 사용할 수 있는 금액을 보여준다. |      |

#### 상품  목록 조회

**정상 상황**

| 입력 | 출력    | 설명                  | 제약사항 |
|----|-------|---------------------|------|
|    | 상품 목록 | 구매 가능한 상품 목록을 보여준다. |      |

#### 선착순 쿠폰 발급

**정상 상황**

| 입력              | 출력     | 설명                 | 제약사항 |
|-----------------|--------|--------------------|------|
| 사용자 아이디, 쿠폰 아이디 | 발급된 쿠폰 | 사용자에게 특정 쿠폰을 발급한다. |      |

**예외 상황**

- 동시에 여러 사용자가 쿠폰을 발급하더라도 정해진 개수만큼만 발급되어야 합니다.

#### 보유 쿠폰 목록 조회

**정상 상황**

| 입력      | 출력        | 설명                               | 제약사항 |
|---------|-----------|----------------------------------|------|
| 사용자 아이디 | 발급된 쿠폰 목록 | 사용자가 현재 소유하고 있는 유효한 쿠폰 목록을 발급한다. |      |

#### 주문

**정상 상황**

| 입력                               | 출력    | 설명                          | 제약사항 |
|----------------------------------|-------|-----------------------------|------|
| 사용자 아이디, {상품 옵션 아이디, 수량, 쿠폰 아이디} | 주문 내역 | 사용자가 소유한 쿠폰을 사용하고 상품을 주문한다. |      |

**예외 상황**

- 이미 사용된 쿠폰이면 정상적으로 주문이 이루어질 수 없습니다.

#### 결제

**정상 상황**

| 입력              | 출력       | 설명                                   | 제약사항                                    |
|-----------------|----------|--------------------------------------|-----------------------------------------|
| 사용자 아이디, 주문 아이디 | 결제 성공 내역 | 사용자가 소유한 금액을 상품 금액만큼 차감한 후 상품을 주문한다. | 데이터 분석을 위해 결제 성공시 주문 정보를 데이터 플랫폼에 제공한다. |

**예외 상황**

- 상품 금액만큼 사용자가 금액을 소유하지 않으면 주문이 이루어질 수 없습니다.
- 주문 시점에 재고가 남아있지 않으면 주문이 이루어질 수 없습니다.
- 데이터 플랫폼과의 상호작용이 주문에 영향을 미쳐서는 안됩니다.

#### 상위 상품 조회

**정상 상황**

| 입력    | 출력       | 설명                                    | 제약사항 |
|-------|----------|---------------------------------------|------|
| 현재 일자 | 상위 상품 목록 | 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 제공하는 API |

최근 3일이란 <b>현재 일로부터 이전 3일</b> 예를 들어, 2025년 3월 30일인 경우 3월 27일 ~ 29일까지의 정보를 의미합니다. 

### 2.2 비기능 요구사항
#### 신뢰성
- 동시에 많은 사용자가 주문하더라도 상품의 재고가 누락되는 문제가 발생해서는 안됩니다.
- 동시에 많은 사용자가 주문하더라도 사용자의 소유 금액에 대한 차감이 누락되는 문제가 발생해서는 안됩니다.
- 특정 사용자가 동시에 상품 주문과 충전을 하더라도 소유 금액이 누락되는 문제가 발생해서는 안됩니다.

#### 확장성
- 다수의 서버로 확장하더라도 기능 제공에 문제가 없어야 합니다.

#### 성능
- 모든 API는 사용자가 오류라고 받아들이지 않는 시간인 3초 이내의 응답 제공해야 합니다.